# Add some properties somewhere but the problem is that we need a CRD since each workspace will have its own allow/denylist

# JuiceFS configuration
juicefs:
  secretName: juicefs-secret
  secretNamespace: kube-system

# NFS configuration
nfs:
  secretName: nfs-secret
  secretNamespace: kube-system

workbench:
  priorityClassName: low-priority
  # Default resource requirements for the xpra server container.
  # When empty, no resources are set. Can be overridden per-workbench via spec.server.resources.
  # serverResources:
  #   limits:
  #     cpu: 1000m
  #     memory: 512Mi
  #   requests:
  #     cpu: 100m
  #     memory: 256Mi
  serverResources: {}

application:
  priorityClassName: preemptible

controllerManager:
  priorityClassName: high-priority
  manager:
    args:
    - --metrics-bind-address=:8080
    - --leader-elect
    - --health-probe-bind-address=:8081
    - --registry=harbor.build.chorus-tre.local
    - --apps-repository=apps
    - --xpra-server-image=harbor.build.chorus-tre.local/apps/xpra-server
    - --init-container-image=harbor.build.chorus-tre.local/apps/app-init
    - --socat-image=alpine/socat:1.8.0.0
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
    image:
      repository: harbor.build.chorus-tre.local/chorus/workbench-operator
      tag: 0.4.13
    resources:
      limits:
        cpu: 500m
        memory: 128Mi
      requests:
        cpu: 10m
        memory: 64Mi
  podSecurityContext:
    runAsNonRoot: true
  replicas: 1
  serviceAccount:
    annotations: {}
imagePullSecrets: []
kubernetesClusterDomain: cluster.local
serviceMonitor:
  enabled: true
metricsService:
  ports:
  - name: http
    port: 8080
    protocol: TCP
    targetPort: 8080
  type: ClusterIP
